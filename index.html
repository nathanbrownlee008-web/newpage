<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top Daily Tips</title>

<style>
body {
  margin:0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background:#0b1220;
  color:white;
}

header {
  padding:25px;
  font-size:28px;
  font-weight:600;
  border-bottom:1px solid #1f2a44;
}

nav {
  padding:15px 25px;
  border-bottom:1px solid #1f2a44;
}

button {
  padding:10px 16px;
  margin-right:10px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:500;
}

.primary { background:#10b981; color:black; }
.secondary { background:#1e293b; color:white; }

.container {
  padding:25px;
}

.grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(320px,1fr));
  gap:25px;
}

.card {
  background:#121a2b;
  padding:20px;
  border-radius:14px;
  border:1px solid #1f2a44;
  box-shadow:0 0 0 1px rgba(255,255,255,0.03);
}

.card h3 {
  margin-top:0;
}

.label {
  font-size:13px;
  opacity:0.7;
}

.value {
  font-size:15px;
  margin-bottom:8px;
}

input, select {
  width:100%;
  padding:8px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #2a3a5e;
  background:#0f172a;
  color:white;
}

.stat-grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
  gap:20px;
}

.stat-box {
  background:#121a2b;
  padding:15px;
  border-radius:12px;
  border:1px solid #1f2a44;
}

hr {
  border:1px solid #1f2a44;
  margin:15px 0;
}

.green { color:#10b981; }
.red { color:#ef4444; }
</style>
</head>

<body>

<header>Top Daily Tips</header>

<nav>
  <button class="secondary" onclick="setTab('dashboard')">Dashboard</button>
  <button class="secondary" onclick="setTab('value')">Value Bets</button>
  <button class="secondary" onclick="setTab('history')">History</button>
  <button class="primary" onclick="setTab('admin')">Admin</button>
</nav>

<div class="container">
  <div id="content"></div>
</div>

<script>

let bets = [];
let tab = "dashboard";

function safe(n){ return isNaN(n) ? 0 : n; }

function edge(prob, odds){
  if(!prob || !odds) return 0;
  return (prob/100 * odds - 1) * 100;
}

function profit(odds, stake, result){
  if(result==="win") return (odds-1)*stake;
  if(result==="loss") return -stake;
  return 0;
}

function setTab(t){
  tab=t;
  render();
}

function addBet(){
  bets.push({
    id:Date.now(),
    match:"",
    market:"",
    odds:2.0,
    probability:50,
    stake:100,
    result:"pending"
  });
  setTab("value");
}

function updateBet(id, field, value){
  bets = bets.map(b => b.id===id ? {...b,[field]:value} : b);
  render();
}

function uploadCSV(e){
  const file=e.target.files[0];
  const reader=new FileReader();
  reader.onload=function(ev){
    const lines=ev.target.result.split("\n");
    lines.forEach(line=>{
      const [match,market,odds,prob,stake]=line.split(",");
      if(match){
        bets.push({
          id:Date.now()+Math.random(),
          match:match.trim(),
          market:market.trim(),
          odds:parseFloat(odds)||0,
          probability:parseFloat(prob)||0,
          stake:parseFloat(stake)||0,
          result:"pending"
        });
      }
    });
    setTab("value");
  }
  reader.readAsText(file);
}

function render(){

const content=document.getElementById("content");
content.innerHTML="";

if(tab==="dashboard"){

  let completed=bets.filter(b=>b.result!=="pending");
  let wins=bets.filter(b=>b.result==="win").length;
  let losses=bets.filter(b=>b.result==="loss").length;
  let totalStaked=bets.reduce((a,b)=>a+safe(b.stake),0);
  let totalProfit=bets.reduce((a,b)=>a+profit(b.odds,b.stake,b.result),0);
  let roi=totalStaked? (totalProfit/totalStaked*100).toFixed(2):0;
  let winRate=completed.length? (wins/completed.length*100).toFixed(2):0;

  content.innerHTML=`
    <div class="stat-grid">
      <div class="stat-box">Total Bets<br><strong>${completed.length}</strong></div>
      <div class="stat-box">Win Rate<br><strong>${winRate}%</strong></div>
      <div class="stat-box">Total Profit<br><strong class="${totalProfit>=0?'green':'red'}">£${totalProfit.toFixed(2)}</strong></div>
      <div class="stat-box">ROI<br><strong>${roi}%</strong></div>
    </div>
  `;
}

if(tab==="value"){
  const grid=document.createElement("div");
  grid.className="grid";

  bets.filter(b=>b.result==="pending").forEach(bet=>{

    const e=edge(bet.probability,bet.odds);
    const potential=safe((bet.odds-1)*bet.stake);

    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <input placeholder="Match" value="${bet.match}" onchange="updateBet(${bet.id},'match',this.value)">
      <input placeholder="Market" value="${bet.market}" onchange="updateBet(${bet.id},'market',this.value)">
      <input type="number" placeholder="Odds" value="${bet.odds}" onchange="updateBet(${bet.id},'odds',parseFloat(this.value)||0)">
      <input type="number" placeholder="Probability %" value="${bet.probability}" onchange="updateBet(${bet.id},'probability',parseFloat(this.value)||0)">
      <input type="number" placeholder="Stake (£)" value="${bet.stake}" onchange="updateBet(${bet.id},'stake',parseFloat(this.value)||0)">

      <hr>
      <div>Edge: <strong class="${e>5?'green':''}">${e.toFixed(2)}%</strong></div>
      <div>Potential Profit: £${potential.toFixed(2)}</div>

      <select onchange="updateBet(${bet.id},'result',this.value)">
        <option value="pending">Pending</option>
        <option value="win">Win</option>
        <option value="loss">Loss</option>
      </select>
    `;

    grid.appendChild(div);
  });

  content.appendChild(grid);
}

if(tab==="history"){
  const grid=document.createElement("div");
  grid.className="grid";

  bets.filter(b=>b.result!=="pending").forEach(bet=>{
    const p=profit(bet.odds,bet.stake,bet.result);

    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <h3>${bet.match}</h3>
      <div>${bet.market}</div>
      <div>Stake: £${bet.stake}</div>
      <div>Result: <strong>${bet.result.toUpperCase()}</strong></div>
      <div class="${p>=0?'green':'red'}">Profit: £${p.toFixed(2)}</div>
    `;

    grid.appendChild(div);
  });

  content.appendChild(grid);
}

if(tab==="admin"){
  content.innerHTML=`
    <div class="card">
      <button class="primary" onclick="addBet()">Add New Bet</button>
      <hr>
      <h3>CSV Upload</h3>
      <p>Format: Match,Market,Odds,Probability,Stake</p>
      <input type="file" accept=".csv" onchange="uploadCSV(event)">
    </div>
  `;
}

}

render();

</script>

</body>
</html>
